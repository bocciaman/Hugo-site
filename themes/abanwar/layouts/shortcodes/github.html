{{ $url := printf "https://api.github.com/repos/%s/contents/%s" (.Get "repo") (.Get "file") }}
{{ $opts := dict "headers" (dict "Accept" "application/vnd.github+json" "User-Agent" "Hugo") }}
{{ with resources.GetRemote $url $opts }}
  {{ $data := . | transform.Unmarshal }}
  {{ $con := base64Decode (index $data "content") }}
  {{ highlight $con (.Get "lang") (.Get "options") }}
{{ else }}
  {{ errorf "Unable to fetch GitHub file content for shortcode at %q" $url }}
{{ end }}
